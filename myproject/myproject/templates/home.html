{% extends "base.html" %}

{% block title %}Dashboard - Jira Employee Management{% endblock %}

{% block extra_css %}
<style>
    .welcome-section {
        background: linear-gradient(135deg, var(--primary) 0%, var(--purple) 100%);
        border-radius: 8px;
        padding: 32px;
        color: white;
        margin-bottom: 24px;
        position: relative;
        overflow: hidden;
    }
    
    .welcome-section::before {
        content: '';
        position: absolute;
        top: -50%;
        right: -10%;
        width: 300px;
        height: 300px;
        background: rgba(255,255,255,0.1);
        border-radius: 50%;
    }
    
    .welcome-content {
        position: relative;
        z-index: 1;
    }
    
    .welcome-section h1 {
        font-size: 24px;
        font-weight: 600;
        margin-bottom: 8px;
    }
    
    .welcome-section p {
        font-size: 14px;
        opacity: 0.9;
    }
</style>
{% endblock %}

{% block content %}
<!-- Welcome Section -->
<div class="welcome-section">
    <div class="welcome-content">
        <h1><i class="fas fa-hand-sparkles"></i> Welcome back, {{ username }}!</h1>
        <p>Here's what's happening with your team today.</p>
    </div>
</div>

<!-- Stats Cards -->
<div class="stats-grid">
    <div class="stat-box">
        <div class="stat-icon stat-icon-blue">
            <i class="fas fa-users"></i>
        </div>
        <div class="stat-content">
            <h3>{{ employees|length }}</h3>
            <p>Total Employees</p>
        </div>
    </div>
    <div class="stat-box">
        <div class="stat-icon stat-icon-green">
            <i class="fas fa-user-check"></i>
        </div>
        <div class="stat-content">
            <h3>{{ users|length }}</h3>
            <p>Active Users</p>
        </div>
    </div>
    <div class="stat-box">
        <div class="stat-icon stat-icon-orange">
            <i class="fas fa-briefcase"></i>
        </div>
        <div class="stat-content">
            <h3>{{ employees|length }}</h3>
            <p>Total Staff</p>
        </div>
    </div>
    <div class="stat-box">
        <div class="stat-icon stat-icon-purple">
            <i class="fas fa-building"></i>
        </div>
        <div class="stat-content">
            <h3>1</h3>
            <p>Departments</p>
        </div>
    </div>
</div>

<!-- Users Table -->
<div class="jira-table-container">
    <div class="jira-table-header">
        <h2><i class="fas fa-users"></i> User List</h2>
        <div style="display: flex; gap: 8px;">
            <button class="jira-btn jira-btn-ghost">
                <i class="fas fa-download"></i> Export
            </button>
            <button class="jira-btn jira-btn-ghost">
                <i class="fas fa-filter"></i> Filter
            </button>
        </div>
    </div>
    <table class="data-table-export" style="width:100%">
        <thead>
            <tr>
                <th>ID</th>
                <th>Username</th>
                <th>Email</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr>
                <td>#{{ user.id }}</td>
                <td>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <div class="avatar avatar-sm" style="background: var(--primary);">{{ user.username|upper|slice:":1" }}</div>
                        {{ user.username }}
                    </div>
                </td>
                <td><i class="fas fa-envelope" style="color: var(--text-secondary); margin-right: 8px;"></i> {{ user.email }}</td>
                <td>
                    {% if user.isactive == 1 %}
                    <span class="status-badge status-active">
                        <i class="fas fa-check-circle"></i> Active
                    </span>
                    {% else %}
                    <span class="status-badge status-inactive">
                        <i class="fas fa-times-circle"></i> Inactive
                    </span>
                    {% endif %}
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4" style="text-align: center; padding: 40px;">
                    <div class="empty-state">
                        <i class="fas fa-users"></i>
                        <h3>No users found</h3>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Employees Table -->
<div class="jira-table-container" style="margin-top: 24px;">
    <div class="jira-table-header">
        <h2><i class="fas fa-user-tie"></i> Employee List</h2>
        <div style="display: flex; gap: 8px;">
            <button class="jira-btn jira-btn-ghost">
                <i class="fas fa-download"></i> Export
            </button>
            <button class="jira-btn jira-btn-ghost">
                <i class="fas fa-filter"></i> Filter
            </button>
        </div>
    </div>
    <table class="data-table-export" style="width:100%">
        <thead>
            <tr>
                <th>SL No</th>
                <th>Employee ID</th>
                <th>Name</th>
                <th>Designation</th>
                <th>Mobile</th>
                <th>Email</th>
            </tr>
        </thead>
        <tbody>
            {% for employee in employees %}
            <tr>
                <td>{{ employee.slno }}</td>
                <td><i class="fas fa-id-badge" style="color: var(--text-secondary); margin-right: 8px;"></i> {{ employee.employeeid }}</td>
                <td>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <div class="avatar avatar-sm" style="background: var(--success);">{{ employee.nameemployee|upper|slice:":1" }}</div>
                        {{ employee.nameemployee }}
                    </div>
                </td>
                <td><i class="fas fa-briefcase" style="color: var(--text-secondary); margin-right: 8px;"></i> {{ employee.designation }}</td>
                <td><i class="fas fa-phone" style="color: var(--text-secondary); margin-right: 8px;"></i> {{ employee.mobilenumber }}</td>
                <td><i class="fas fa-envelope" style="color: var(--text-secondary); margin-right: 8px;"></i> {{ employee.localguardianemail }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="6" style="text-align: center; padding: 40px;">
                    <div class="empty-state">
                        <i class="fas fa-user-tie"></i>
                        <h3>No employees found</h3>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}